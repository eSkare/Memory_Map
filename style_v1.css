/* 1. Base setup: Make html and body fill the screen and use flexbox */
html, body {
    height: 100%;
    margin: 0;
    /* Adjust padding: padding-bottom should be 0 to remove space beneath the last element */
    padding: 10px 10px 0 10px; /* Top, Right, Bottom (0), Left */
    overflow: hidden; /* Prevent main page scrolling; internal scrolling will handle content */
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
}

/* 2. Style static header elements (h1, p) */
body > h1,
body > p {
    flex-shrink: 0; /* These elements should take their natural height and not shrink */
    text-align: center;
    margin-top: 0;
    margin-bottom: 5px; /* Reduced spacing below header */
}

/* 3. Make main containers (#auth-container, #app-container) fill available space */
#auth-container,
#app-container {
    flex-grow: 1; /* These will expand to fill vertical space */
    display: flex;
    flex-direction: column; /* Stack their children vertically */
    overflow: hidden; /* Important: prevents scrollbars here, allowing children to manage their own scroll */
    box-sizing: border-box;
    /* Adjust padding here - consider if you need padding at the very bottom inside this container */
    padding: 10px; /* Keep overall padding, adjust if inner elements need tighter bottom */
    border: 1px solid #eee;
    border-radius: 8px;
    background-color: #f9f9f9;
}

/* 4. Style elements within #app-container (buttons, etc.) */
#app-container h2,
#app-container button,
/* Removed #app-container h3 and hr from here, as they are now styled explicitly or within collections-container */
#collections-container h3, /* This h3 is specifically inside collections-container now */
#collections-container input,
#collections-container button {
    flex-shrink: 0; /* These elements should take their natural height */
    margin-bottom: 5px; /* Reduced spacing below them */
}

/* Make the map itself flexible and take most space */
#map {
    width: 100%;
    flex-grow: 7; /* Map takes 7 parts of available flexible space (e.g., ~70% if ratio is 7:3) */
    min-height: 200px; /* Minimum height for usability */
    margin-top: 5px; /* Reduced margin above map */
    margin-bottom: 5px; /* Reduced margin below map */
    border: 1px solid #ccc;
}

/* Adjustments for the hr elements */
hr {
    flex-shrink: 0; /* Ensure hr takes its natural height and doesn't compress */
    width: 100%;
    border: none;
    border-top: 1px solid #ccc;
    margin: 5px 0; /* Reduced vertical margin for HRs */
}

/* Collections Container - Make it smaller and control its vertical growth */
#collections-container {
    flex-grow: 3; /* Collections container takes 3 parts of available flexible space */
    min-height: 100px; /* Ensure it's not too small on desktop */
    /* Optional: If you want an absolute cap, use max-height: */
    /* max-height: 200px; /* Example: Cap its height */
    
    display: flex; /* It needs to be a flex container for its own contents */
    flex-direction: column; /* Stack its children vertically */
    
    margin-top: 5px; /* Reduced margin above it */
    margin-bottom: 0; /* **Crucial: Remove margin at the bottom** */
    padding: 10px; /* Slightly reduced internal padding */
    border: 1px solid #eee;
    border-radius: 8px;
    background-color: #f9f9f9;
    box-sizing: border-box;
    overflow: hidden; /* Ensure its contents scroll internally if needed */
}

/* collections-list (inside collections-container) */
#collections-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
    flex-shrink: 0; /* Important: Don't let it shrink */
    flex-grow: 1; /* Allow the list itself to grow within collections-container */
    max-height: 100%; /* This will allow it to fill its parent's height up to 100% */
    overflow-y: auto; /* Enable vertical scrolling for the list */
    align-content: flex-start; /* Important for wrapped flex items when height is constrained */
}


/* --- Media Queries for Mobile Responsiveness --- */
@media (max-width: 768px) {
    body {
        padding: 5px 5px 0 5px; /* Less padding on mobile, 0 at bottom */
    }
    #app-container, #auth-container {
        padding: 5px;
    }
    #map {
        flex-grow: 4; /* Map might take slightly less priority, e.g., 60% (4:2 ratio) */
        min-height: 150px;
        margin-top: 5px;
        margin-bottom: 5px;
    }
    #collections-container {
        flex-grow: 2; /* Collections container takes remaining flexible space */
        min-height: 80px; /* Smaller minimum height for mobile */
        margin-top: 5px;
        padding: 8px; /* Slightly less padding on mobile */
    }
    #collections-list {
        max-height: 100%; /* Still fills parent */
    }
    #profileData { /* If you add this back in the future, consider its mobile sizing */
        max-height: 80px;
    }
    .collection-item {
        font-size: 0.85em;
        padding: 6px 10px;
    }
}

/* Additional styling for collection items */
.collection-item {
    background-color: #e0e0e0;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9em;
}
.collection-item.selected {
    background-color: #007bff;
    color: white;
}