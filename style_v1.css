/* 1. Base setup: Make html and body fill the screen and use flexbox */
html, body {
    height: 100%;
    margin: 0;
    /* Adjust padding: padding-bottom should be 0 to remove space beneath the last element */
    padding: 10px 10px 0 10px; /* Top, Right, Bottom (0), Left */
    overflow: hidden; /* Prevent main page scrolling; internal scrolling will handle content */
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
}

/* 2. Style static header elements (h1, p) */
body > h1,
body > p {
    flex-shrink: 0; /* These elements should take their natural height and not shrink */
    text-align: center;
    margin-top: 0;
    margin-bottom: 5px; /* Reduced spacing below header */
}

/* 3. Make main containers (#auth-container, #app-container) fill available space */
#auth-container,
#app-container {
    flex-grow: 1; /* These will expand to fill vertical space */
    display: flex;
    flex-direction: column; /* Stack their children vertically */
    overflow: hidden; /* Important: prevents scrollbars here, allowing children to manage their own scroll */
    box-sizing: border-box;
    /* Adjust padding here - consider if you need padding at the very bottom inside this container */
    padding: 10px; /* Keep overall padding, adjust if inner elements need tighter bottom */
    border: 1px solid #eee;
    border-radius: 8px;
    background-color: #f9f9f9;
}

/* 4. Style elements within #app-container (buttons, etc.) */

#app-container button,
/* Removed #app-container h3 and hr from here, as they are now styled explicitly or within collections-container */
#collections-container input,
#collections-container button {
    flex-shrink: 0; /* These elements should take their natural height */
    margin-bottom: 5px; /* Reduced spacing below them */
}
#collections-container h3 {
    margin-top: 10px; /* Adjust this value to your preference, e.g., 5px or 8px */
    margin-bottom: 5px; /* Keep consistent with other small margins */
}
#app-container h2 {
    margin-top: 10px; /* Adjust this value to your preference, e.g., 5px or 8px */
    margin-bottom: 5px; /* Keep consistent with other small margins */
}

/* Make the map itself flexible and take most space */
#map {
    width: 100%;
    flex-grow: 7; /* Map takes 7 parts of available flexible space (e.g., ~70% if ratio is 7:3) */
    min-height: 200px; /* Minimum height for usability */
    margin-top: 5px; /* Reduced margin above map */
    margin-bottom: 5px; /* Reduced margin below map */
    border: 1px solid #ccc;
}

/* Adjustments for the hr elements */
hr {
    flex-shrink: 0; /* Ensure hr takes its natural height and doesn't compress */
    width: 100%;
    border: none;
    border-top: 1px solid #ccc;
    margin: 5px 0; /* Reduced vertical margin for HRs */
}

/* Adjustments for the collections container itself */
#collections-container {
    flex-grow: 1; /* Allow collections container to grow and take remaining space */
    display: flex;
    flex-direction: column; /* Still a column for its children (h3, list, input, button) */
    margin-top: 5px;
    margin-bottom: 0; /* Crucial: No space beneath it */
    padding: 10px; /* Adjusted padding */
    border: 1px solid #eee;
    border-radius: 8px;
    background-color: #f9f9f9;
    box-sizing: border-box;

    /* If you want the ENTIRE collections box to be smaller than default flex-grow: 1,
       you can add a max-height here for desktop, and adjust in media query for mobile.
       This will cap its vertical size, forcing map to take more space.
    */
    max-height: 180px; /* Example: Adjust this value to make the whole box smaller */
}

/* collections-list (inside collections-container) */
#collections-list {
    display: flex;
    flex-wrap: nowrap; /* <-- KEY CHANGE: Forces items into a single horizontal row */
    gap: 10px;
    margin-top: 10px;
    flex-shrink: 0; /* Ensure the list itself doesn't shrink vertically */
    /* REMOVE flex-grow: 1; from here, as it should only take content height, not fill vertical space */
    
    height: auto; /* It will take the natural height of its single row of content */
    /* REMOVE max-height: 100%; as it's no longer wrapping vertically */

    overflow-x: auto; /* <-- KEY CHANGE: Enable horizontal scrolling */
    overflow-y: hidden; /* <-- KEY CHANGE: Hide vertical overflow */
    
    padding-bottom: 5px; /* Add some padding for the horizontal scrollbar on some OSes */

    /* REMOVE align-content: flex-start; as it's for wrapped content */
}


/* --- Media Queries for Mobile Responsiveness --- */
@media (max-width: 768px) {
    body {
        padding: 5px 5px 0 5px; /* Less padding on mobile, 0 at bottom */
    }
    #app-container, #auth-container {
        padding: 5px;
    }
    #map {
        flex-grow: 4; /* Map takes less priority, e.g., 60% of flexible space (4:2 ratio) */
        min-height: 150px;
        margin-top: 5px;
        margin-bottom: 5px;
    }
    #collections-container {
        flex-grow: 0;
        min-height: auto;
        max-height: 120px; /* This caps its visible height */
        margin-top: 5px;
        padding: 8px;
        
        /* --- CRUCIAL CHANGE HERE --- */
        overflow-y: auto; /* Allow vertical scrolling if content exceeds max-height */
        overflow-x: hidden; /* Explicitly prevent horizontal scrolling for the container itself */
    }
    #collections-list {
        max-height: 100%; /* Still fills parent */
    }
    #profileData { /* If you add this back in the future, consider its mobile sizing */
        max-height: 80px;
    }
    .collection-item {
        font-size: 0.85em;
        padding: 6px 10px;
    }
}

/* Ensure individual collection items don't shrink and are consistently sized */
.collection-item {
    flex-shrink: 0; /* <-- CRUCIAL: Prevent items from shrinking when forcing horizontal flow */
    background-color: #e0e0e0;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9em;
    white-space: nowrap; /* <-- Prevents text from wrapping within the collection item */
    
    /* Optional: Give collection items a consistent height for alignment */
    height: 25px; /* Example height */
    line-height: 19px; /* Adjust line-height to vertically center text (height - padding_top - padding_bottom) */
}
.collection-item.selected {
    background-color: #007bff;
    color: white;
}